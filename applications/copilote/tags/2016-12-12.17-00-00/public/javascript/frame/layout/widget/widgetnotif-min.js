YUI.add("widgetnotif",function(b){function a(){a.superclass.constructor.apply(this,arguments)}a.NAME="WidgetNotif";a.ATTRS={oDataSet:{writeOnce:true,getter:function(c){return this.Layout().Frame().DataSetManager().DataSet(c)}},sLabelColumn:{value:null},sTypeColumn:{value:null},sDismissibleColumn:{value:null},bAlphaSort:{value:false},aItems:{value:[]},sRootTemplate:{value:'<div id={id} class="{eltClass}">{items}</div>'},sItemTemplate:{value:['<div class="alert {infoClass} {infoDismissible}" role="alert">',"{eltDismissible}","{label}","</div>"].join("")},sDismissTemplate:{value:'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'},sDefaultGridClass:{value:"col-xs-12"}};b.WidgetNotif=b.extend(a,b.WidgetField,{initializer:function(){var c=this.get("oWidgetDef");this.set("oDataSet",c.d);this.set("sLabelColumn",this.GetWidgetDefValue("options.text","text"));this.set("sTypeColumn",this.GetWidgetDefValue("options.type","type"));this.set("sDismissibleColumn",this.GetWidgetDefValue("options.dismissible","dismissible"))},Render:function(g){var h=this.get("oDataSet");var e=[],f,j="",d=this.get("sItemTemplate"),c=this.get("sRootTemplate"),k=this.get("sDismissTemplate");h.RowData().First();while(false===h.RowData().EoF()){f={id:this.UniqId()+"-"+h.RowData().GetFieldValue("id_data"),label:h.RowData().GetFieldValue(this.get("sLabelColumn")),"class":h.RowData().GetFieldValue(this.get("sTypeColumn")),dismissible:h.RowData().GetFieldValue(this.get("sDismissibleColumn"))};e.push(f);h.RowData().Next()}for(i=0;i<e.length;i++){j+=b.Lang.sub(d,{id:e[i].id,label:e[i]["label"],infoClass:(e[i]["class"]?this._getClass(e[i]["class"]):""),infoDismissible:(e[i]["dismissible"]?this._getDismiss(e[i]["dismissible"]):""),eltDismissible:(this._getDismiss(e[i]["dismissible"])!=""?k:"")})}b.one(document.getElementById(g)).append(b.Lang.sub(c,{id:this.UniqId(),items:j,eltClass:this.GetClass()}))},Update:function(){},_getDicoTypeNotif:function(d){var e=this.get("oDataSet");var f=e.get("oDataSetManager").DataSetDico("type_notif");var c=0;f.RowData().BackupCursor();f.RowData().First();while(!f.RowData().EoF(true)){if(f.Field("id_data").GetValue()===d){c=f.Field("code").GetValue();break}f.RowData().Next()}f.RowData().RestoreCursor();return c},_getDicoYorN:function(c){var d=this.get("oDataSet");var e=d.get("oDataSetManager").DataSetDico("lg01");var f=0;e.RowData().BackupCursor();e.RowData().First();while(!e.RowData().EoF(true)){if(e.Field("id_data").GetValue()===c){f=e.Field("code").GetValue();break}e.RowData().Next()}e.RowData().RestoreCursor();return f},_getClass:function(d){var c="";iCodeTypeNotif=this._getDicoTypeNotif(d);switch(iCodeTypeNotif){case"1":c="success";break;case"2":c="info";break;case"3":c="warning";break;case"4":c="danger";break}return"alert-"+c},_getDismiss:function(c){iCodeYorn=this._getDicoYorN(c);if(iCodeYorn=="1"){return"alert-dismissible"}return""},SetStyle:function(c){b.all("#"+this.UniqId()+" li").each(function(d){d.removeClass(this.get("CLASS_ERROR")).removeClass(this.get("CLASS_WARNING")).removeClass(this.get("CLASS_NOTICE")).removeClass(this.get("CLASS_INFO"));if(c){d.addClass(c)}},this)}})},"0.0.1",{requires:["widgetbase"]});